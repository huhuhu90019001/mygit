<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title></title>
<!-- 若您需要使用Kendo UI Professional，请联系版权人获得合法的授权或许可。 -->
<!-- Bootstrap css -->
<link href="https://magicbox.bk.tencent.com/static_api/v3/assets/bootstrap-3.3.4/css/bootstrap.min.css" rel="stylesheet">
<!-- kendo ui css -->
<link href="https://magicbox.bk.tencent.com/static_api/v3/assets/kendoui-2015.2.624/styles/kendo.common.min.css" rel="stylesheet">
<link href="https://magicbox.bk.tencent.com/static_api/v3/assets/kendoui-2015.2.624/styles/kendo.default.min.css" rel="stylesheet">
<!-- font-awesome -->
<link href="https://magicbox.bk.tencent.com/static_api/v3/assets/fontawesome/css/font-awesome.css" rel="stylesheet">
<!--蓝鲸提供的公用样式库 -->
<link href="https://magicbox.bk.tencent.com/static_api/v3/bk/css/bk.css" rel="stylesheet">
<link href="https://magicbox.bk.tencent.com/static_api/v3/bk/css/bk_pack.css" rel="stylesheet">
<!-- 如果要使用Bootstrap的js插件，必须先调入jQuery -->
<script src="https://magicbox.bk.tencent.com/static_api/v3/assets/js/jquery-1.10.2.min.js"></script>
<!-- 包括所有bootstrap的js插件或者可以根据需要使用的js插件调用　-->
<script src="https://magicbox.bk.tencent.com/static_api/v3/assets/echarts-2.0/echarts-all.js"></script>
<script src="https://magicbox.bk.tencent.com/static_api/v3/assets/bootstrap-3.3.4/js/bootstrap.min.js"></script>
<!-- 包括所有kendoui的js插件或者可以根据需要使用的js插件调用　-->
<script src="https://magicbox.bk.tencent.com/static_api/v3/assets/kendoui-2015.2.624/js/kendo.all.min.js"></script>
<script src="https://magicbox.bk.tencent.com/static_api/v3/assets/echarts-2.0/echarts-all.js"></script>
<script src="https://magicbox.bk.tencent.com/static_api/v3/bk/js/bk.js"></script>
<!-- 数据埋点统计 -->
<script src="http://magicbox.bk.tencent.com/static_api/analysis.js"></script>
<!-- 以下两个插件用于在IE8以及以下版本浏览器支持HTML5元素和媒体查询，如果不需要用可以移除 -->
<!--[if lt IE 9]><script src="https://magicbox.bk.tencent.com/static_api/v3/assets/js/html5shiv.min.js"></script><script src="https://magicbox.bk.tencent.com/static_api/v3/assets/js/respond.min.js"></script><![endif]-->
</head>
<body class="bg-white" data-bg-color="bg-white">
    <div class="king-page-box">
        <div class="king-layout1-header">
            <nav>
                <div style="overflow:hidden;" class="king-header king-header1  ">
                    <div class="king-header-inner">
                        <div class="king-header-brand">
                            <a href="javascript:;">
                                <img src="https://magicbox.bk.tencent.com/static_api/v3/bk/images/logo3.png" alt="" class="logo"> </a>
                        </div>
                        <div class="king-header-list list2">
                            <ul>
                                <li> <a href="javascript:;"><i class="glyphicon glyphicon-shopping-cart"></i></a> </li>
                                <li> <a href="javascript:;"><i class="glyphicon glyphicon-search"></i></a> </li>
                            </ul>
                        </div>
                        <div class="king-header-list list1">
                            <ul>
                                <li class="active">
                                    <a class="list-home f14" href="/homework/">
                                        <span>首页</span>
                                    </a>
                                </li>
                                <li>
                                    <a class="list-home f14" href="/homework/host/">
                                        <span>主机状态</span>
                                    </a>
                                </li>
                                <li>
                                    <a class="list-home f14" href="/homework/operate/">
                                        <span>操作记录</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
        <div class="king-layout2-main mt15" style="width:960px;">
            <form class="form-horizontal">
                <div class="form-group clearfix ">
                    <label class="col-sm-3 control-label bk-lh30 pt0">选择业务：</label>
                    <div class="col-sm-9">
                        <select name="" id="biz_id" class="form-control bk-valign-top"> </select>
                    </div>
                </div>
            </form>
            <form class="form-horizontal" method="get" action="/homework/">
                <div class="form-group clearfix ">
                    <label class="col-sm-3 control-label bk-lh30 pt0">输入内网IP：</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control bk-valign-top" id="ip" placeholder="${ ip }" name="ip"> </div>
                </div>
                <div class="form-group clearfix">
                    <div class="col-sm-9 col-sm-offset-3">
                        <button type="submit" class="king-btn mr10  king-success">查询</button>
                    </div>
                </div>
            </form>
            <form class="form-horizontal">
                <div class="king-block king-block-bordered king-block-themed mb0">
                    <div class="king-block-header king-gray-dark">
                        <ul class="king-block-options">
                            <li>
                                <!-- <button type="button"><i class="fa fa-cog"></i></button> -->
                            </li>
                        </ul>
                        <h3 class="king-block-title">查询结果</h3>
                    </div>
                    <div class="king-block-content">
                        <table class="table mb0 pr15 ranger-box2  ">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>IP</th>
                                    <th>Mem/Disk/CPU</th>
                                    <th>最后巡检时间</th>
                                    <th>大区</th>
                                    <th>模块</th>
                                    <th>云区域</th>
                                    <th>系统类型</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                %for capacitydata in capacitydatas:
                                <tr>
                                    <td>${ capacitydata.index }</td>
                                    <td>${ capacitydata.ip }</td>
                                    <td style="background-color:green"><p style="color:white">${ capacitydata.mem_disk_cpu }</td>
                                    <td>${ capacitydata.exec_time }</td>
                                    <td>${ capacitydata.set }</td>
                                    <td>${ capacitydata.module }</td>
                                    <td>${ capacitydata.instname }</td>
                                    <td>${ capacitydata.osname }</td>
                                    <td>
                                        <button class="btn btn-xs btn-success"> <i class="glyphicon glyphicon-ok"></i> </button>
                                        <button class="btn btn-xs btn-warning"> <i class="glyphicon glyphicon-edit"></i> </button>
                                        <button class="btn btn-xs btn-danger"> <i class="glyphicon glyphicon-remove"></i> </button>
                                    </td>
                                </tr>
                                % endfor
                            </tbody>
                        </table>
                        <template id="header_tpl_1526111412901">
                            <tr>
                                <th>#</th>
                                <th>IP</th>
                                <th>Mem/Disk/CPU</th>
                                <th>最后巡检时间</th>
                                <th>大区</th>
                                <th>模块</th>
                                <th>云区域</th>
                                <th>系统类型</th>
                                <th>操作</th>
                            </tr>
                        </template>
                        <template id="tpl_1526111412901">
                            <tr>
                                <td>#Index#</td>
                                <td>#ip#</td>
                                <td >#Mem/Disk/CPU#</td>
                                <td>#ExecTime#</td>
                                <td>#Set#</td>
                                <td>#Module#</td>
                                <td>#InstName#</td>
                                <td>#OsName#</td>
                                <td>
                                    <button class="btn btn-xs btn-success"> <i class="glyphicon glyphicon-ok"></i> </button>
                                    <button class="btn btn-xs btn-warning"> <i class="glyphicon glyphicon-edit"></i> </button>
                                    <button class="btn btn-xs btn-danger"> <i class="glyphicon glyphicon-remove"></i> </button>
                                </td>
                            </tr>
                        </template>
                        <!-- 下拉框模板 -->
                        <template id="app_tpl">
                            <option value="#id#">#name#</option>
                        </template>
                        <!-- 设置面板End -->
                    </div>
                    <ul class="pagination">
                        <li>
                            <a href="javascript:;" aria-label="Previous">
                                <span aria-hidden="true">«</span>
                            </a>
                        </li>
                        <li><a href="javascript:;">1</a></li>
                        <li><a href="javascript:;">2</a></li>
                        <li><a href="javascript:;">3</a></li>
                        <li><a href="javascript:;">4</a></li>
                        <li><a href="javascript:;">5</a></li>
                        <li>
                            <a href="javascript:;" aria-label="Next">
                                <span aria-hidden="true">»</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </form>
        </div>
    </div>


<script>
    function renderTpl(str, cfg) {
        var re = /(#(.+?)#)/g;

        return str.replace(re, function() {
            var val = cfg[arguments[2]]+'';
            if(typeof val == 'undefined') {
                val = '';
            }
            return val;
        });
    }

    $(function(){
        /*
        * 查询表单级联数据拉取
        */
        $.get('${SITE_URL}homework/get_biz_list/', function(data){
                if(data.result){
                    var _html = '';
                    var list = data.data;
                    var tpl = $('#app_tpl').html();
                    for (var i=0,len=list.length; i < len; i++){
                        var item = list[i];
                        _html += renderTpl(tpl, item)
                    }
                    $('#biz_id').html(_html);

                    var biz_id = $("#biz_id").val();
                }else{
                    alert("获取失败")
                }
            }, 'json')
    })

</script>
</body>

</html>